$(document).ready(function()
{
	var $sidebar = $('#sidebar');

	$('#main-section h2').each(function(i, h2)
	{
		var id = 'sec' + i.toString();
		$(h2).attr('id', id);

		$('<li class=""><a href="#' + id + '">' + $(h2).html() + '</a></li>').appendTo($sidebar);
	});

	$sidebar.affix({ offset: { top: 150 } });

	var $body   = $(document.body);
	var navHeight = $('.navbar').outerHeight(true) + 10;

	$body.scrollspy({ target: '#left-side', offset: navHeight });

	$('a[href*="#"]:not([href="#"])').click(function()
	{
		if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname)
		{
			var target = $(this.hash);
			target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
			if (target.length)
			{
				$('html,body').animate({ scrollTop: target.offset().top - 50 }, 1000);
				return false;
			}
		}
	});

	$('#search').keyup(function(e)
	{
		if(e.keyCode == 13)
		{
			var search = $('#search').val();
			var url = 'https://www.google.com/#q=site:sukona.github.io ' + search;
			window.location.href = encodeURI(url);

			e.stopPropagation();
			if (e.cancelBubble!=null) e.cancelBubble = true;
			return false;
		}
	});
});